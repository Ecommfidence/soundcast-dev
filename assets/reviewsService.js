'use strict';
myApp.factory('Reviews', function(){
  return {
      reviews:[{"company":"Sound & Vision","original_url":"http://www.soundandvision.com/content/soundcast-systems-melody-bluetooth-speaker","website":"http://www.soundandvision.com/","author":"Darryl Wilkinson","preview_text":"\"it’s one of those rare audio devices that you’re likely to find yourself using for applications and situations you originally had no idea it would be ideal for\"","reviews_link":"https://cdn.shopify.com/s/files/1/0392/7805/files/Melody_Sound_and_Vision_Review_07.11.14.pdf?22335","company_logo":"http://cdn.gosoundcast.com/media-press/logos/soundvision.jpg"},
{"company":"Sound & Vision","original_url":"http://www.soundandvision.com/content/soundcast%E2%80%99s-melody-makes-music-round-anywhere","website":"http://www.soundandvision.com/","author":"Darryl Wilkinson","preview_text":"\"Soundcast’s Melody has set a new, audaciously high standard for portable Bluetooth® HD speakers. It’s certainly one of the best sounding Bluetooth® HD speakers I’ve ever heard, and it has an absurdly long battery life… Melody is the envy of all other Bluetooth® HD speakers. It doesn’t get any better than this.\"","reviews_link":"http://cdn.shopify.com/s/files/1/0392/7805/files/Melody_Sound_and_Vision_Review_06.29.13.pdf?21052","company_logo":"http://cdn.gosoundcast.com/media-press/logos/soundvision.jpg"},
{"company":"GeekBeat.tv","original_url":"http://www.youtube.com/watch?v=M4SQ3zb296Q","website":"http://geekbeat.tv/","author":" Cali Lewis","preview_text":"\"The [Melody] really is for anywhere, anything--the pool, camping, tailgaiting, events! It sounds great, it's portable, it's light.\"","reviews_link":"https://cdn.shopify.com/s/files/1/0392/7805/files/Melody_Geek_Beat_TV_Review_06.12.14_4782e2f7-e91d-47b9-a77d-2d17c02a2464.pdf?22334","company_logo":"http://cdn.gosoundcast.com/media-press/logos/geekbeat_200x200.jpg"},
{"company":"","original_url":"http://www.prnewswire.com/news-releases/sophisticated-sexy-smart--meet-melody-by-soundcast-211787041.html","website":"","author":"Devin Bronson","preview_text":"\"I can tell you that I'm blown away at the soundstage depth, deep bass, pure vocals and lifelike performance that the new Melody system delivers from such a compact system--blown away, I'll say again.\"","reviews_link":"http://cdn.shopify.com/s/files/1/0392/7805/files/Melody_PR_Newswire_Review_06.12.14.pdf?21052","company_logo":"http://cdn.gosoundcast.com/media-press/logos/devin_bronson_200x200.jpg"},
{"company":"Wired Gadget Lab","original_url":"http://www.wired.com/gadgetlab/2013/09/ifa-gallery/#slideid-192681","website":"http://www.wired.com/gadgetlab/","author":"Maurizio Pesce","preview_text":"\"When you think of Bluetooth® HD speakers, portability is usually the first thing to come to mind. This makes them ideal for intimate gatherings outdoors. But when the situation calls for truly big sound, you'll want something more like Soundcast's Melody. This Bluetooth® HD speaker pushes out 360 degrees of sound and connects to smartphones and streaming services like Spotify, Pandora, TuneIn, and Rhapsody. It's also splash-proof, and can party for 20 hours between charges.\"","reviews_link":"http://cdn.shopify.com/s/files/1/0392/7805/files/Melody_Wired_Review_09.10.13.pdf?21052","company_logo":"http://cdn.gosoundcast.com/media-press/logos/wired_gadget_200x200.jpg"},
{"company":"Digital Trends","original_url":"http://www.digitaltrends.com/wireless-speaker-reviews/soundcast-melody-review/#/1","website":"http://www.digitaltrends.com/","author":"Ryan Waniata","preview_text":"“In a market increasingly cluttered with outdoor-ready, portable speakers, the Soundcast Melody stands out as one of the best sounding portables we’ve ever heard.”","reviews_link":"http://cdn.shopify.com/s/files/1/0392/7805/files/Melody_Digital_Trends_Review_11.14.13.pdf?21052","company_logo":"http://cdn.gosoundcast.com/media-press/logos/digital_trends_200x200.jpg"},
{"company":"SFWEEKLY","original_url":"http://blogs.sfweekly.com/shookdown/2013/12/which_wireless_speaker_system_beats_pill_sonos_play_cambridge_air_minx.php","website":"http://www.sfweekly.com/","author":"Tony Ware","preview_text":"“Glampers, gourmet indoor picnickers, and on-the-go full-fidelity audio enthusiasts, put this one on your wish list.”","reviews_link":"http://cdn.shopify.com/s/files/1/0392/7805/files/Melody_SF_Weekly_Review_12.09.13.pdf?21052","company_logo":"http://cdn.gosoundcast.com/media-press/logos/sfweekly_200x200.jpg"},
{"company":"Gear Diary","original_url":"http://geardiary.com/2013/10/21/soundcast-melody-bluetooth-speaker-weatherproof-omnidirectional-sound-with-great-portability/","website":"http://geardiary.com/","author":"Dan Cohen","preview_text":"\"Speaking of sound, how does it sound? It sounds really, really good. I’m very impressed by the quality of this speaker. I like the volume—it gets really loud without distortion.”","reviews_link":"http://cdn.shopify.com/s/files/1/0392/7805/files/Melody_Gear_Diary_Review_10.21.13.pdf?21052","company_logo":"http://cdn.gosoundcast.com/media-press/logos/gear_diary_200x200.jpg"},
{"company":"About.com","original_url":"http://stereos.about.com/od/Wireless/fl/Soundcast-Systems-Melody-Bluetooth-Outdoor-Speaker-Review.htm","website":"http://www.about.com/#!/editors-picks/","author":"Brent Butterworth","preview_text":"There's one word that describes the Melody's sound: robust. … The sound is gratifyingly full, always, with any material.”","reviews_link":"http://cdn.shopify.com/s/files/1/0392/7805/files/Melody_About.com_Review_06.12.14.pdf?21052","company_logo":"http://cdn.gosoundcast.com/media-press/logos/about.jpg"},
{"company":"The Examiner","original_url":"http://www.examiner.com/review/soundcast-melody-portable-bluetooth-speaker-yields-impressive-sound","website":"http://www.examiner.com/","author":"Daniel DeSlover","preview_text":"\"The Melody should be on any music fan's wishlist heading into the holidays. If you're looking for portability and high quality sound then the Melody should more than satisfy your needs.\"","reviews_link":"http://cdn.shopify.com/s/files/1/0392/7805/files/Melody_Examiner_Review_06.12.14.pdf?21052","company_logo":"http://cdn.gosoundcast.com/media-press/logos/examiner_200x200.jpg"},
{"company":"Tom's Guide","original_url":"http://www.tomsguide.com/us/soundcast-melody-bluetooth-speaker,review-1935.html","website":"http://www.tomsguide.com/","author":"Mike Kobrin","preview_text":"\"It outperforms every other portable Bluetooth® HD speaker we've heard so far.\"","reviews_link":"http://cdn.shopify.com/s/files/1/0392/7805/files/Melody_Toms_Guide_Review_06.12.14.pdf?21052","company_logo":"http://cdn.gosoundcast.com/media-press/logos/toms_guide_200x200.jpg"},
{"company":"PC Magazine","original_url":"http://www.pcmag.com/article2/0,2817,2426610,00.asp","website":"http://www.pcmag.com/","author":" Eric Griffith","preview_text":"\"The portable, rechargeable Soundcast Melody wireless Bluetooth® HD speaker delivers excellent, powerful audio performance. The lows are deep and the highs are crisp. What's more, this speaker is great outdoors as it's sun and water resistant.\"","reviews_link":"http://cdn.shopify.com/s/files/1/0392/7805/files/Melody_PC_Mag_Review_06.12.14.pdf?21052","company_logo":"http://cdn.gosoundcast.com/media-press/logos/pc_200x200.jpg"},
{"company":"GStyleMagazine","original_url":"http://gstylemag.com/2013/11/29/ch-ch-ch-check-out-my-melody-soundcast-bluetooth-speaker-review/","website":"http://gstylemag.com/","author":"","preview_text":"\"Man listen, I have to go on record as saying that the Soundcast Melody Wireless Bluetooth® HD v3.0 is easily a portable concert.\"","reviews_link":"http://cdn.shopify.com/s/files/1/0392/7805/files/Melody_G_Style_Mag_Review_06.12.14.pdf?21052","company_logo":"http://cdn.gosoundcast.com/media-press/logos/gstyle_200x200.jpg"},
{"company":"New York Daily News","original_url":"http://www.nydailynews.com/life-style/holiday-gift-guide-2013/11-cool-tech-gifts-holiday-season-article-1.1529426","website":"http://www.nydailynews.com/","author":"Ebenezer Samuel","preview_text":"“It’s easy and convenient to tote around for outdoor parties and other events, and once it’s in position, it can easily fill an outdoor venue with sound for 20 hours.”","reviews_link":"http://cdn.shopify.com/s/files/1/0392/7805/files/Melody_Daily_News_Review_06.12.14.pdf?21405","company_logo":"http://cdn.gosoundcast.com/media-press/logos/newyork_dailynews_200x200.jpg"},
{"company":"The Huffington Post","original_url":"http://m.huffpost.com/us/entry/4345157","website":"http://www.huffingtonpost.com/","author":"Michael Berman","preview_text":"\"From treble to bass, this Bluetooth® HD system reproduced sounds that were clean and crisp with no dropouts and no traces of static.\"","reviews_link":"http://cdn.shopify.com/s/files/1/0392/7805/files/Melody_Huff_Post_Tech_Review_06.12.14.pdf?21052","company_logo":"http://cdn.gosoundcast.com/media-press/logos/thehuffinton_post_200x200.jpg"},
{"company":"Gadget Review","original_url":"http://www.gadgetreview.com/home-theater/soundcast-melody-wireless-speaker-review","website":"http://www.gadgetreview.com/","author":"Shawn Sanders","preview_text":"\"The overall soundstage is voluminous with great clarity and distinction...The sound appears to come from everywhere.\"","reviews_link":"http://cdn.shopify.com/s/files/1/0392/7805/files/Melody_Gadget_Review_Review_06.12.14.pdf?21052","company_logo":"http://cdn.gosoundcast.com/media-press/logos/gadget_review_200x200.jpg"},
{"company":"TrulyNet","original_url":"http://www.trulynet.com/10402/Gadgets/soundcast-melody-outcast-bluecast-superior-all-weather-bluetooth-audio-system/","website":"www.trulynet.com","author":"","preview_text":"\"The Soundcast Melody takes our prize for the best-sounding portable outdoors-friendly sound system that we've yet tested.\"","reviews_link":"http://cdn.shopify.com/s/files/1/0392/7805/files/Melody_Truly_Net_Review_06.12.14.pdf?21052","company_logo":"http://cdn.gosoundcast.com/media-press/logos/truly_net_200x200.jpg"},
{"company":"iLounge.com","original_url":"http://www.ilounge.com/index.php/reviews/entry/soundcast-melody-outdoor-bluetooth-speaker-system/","website":"http://www.ilounge.com/","author":" Jeremy Horwitz","preview_text":"“Built for outdoor use and atypically powerful, Melody has the rare ability to resist moderate rain and snow, bringing features from the company's five-year-old OutCast down to a smaller and more affordable package.\"","reviews_link":"http://cdn.shopify.com/s/files/1/0392/7805/files/Melody_I_Lounge.com_Review_06.12.14.pdf?21052","company_logo":"http://cdn.gosoundcast.com/media-press/logos/ilounge_200x200.jpg"},
{"company":"Technology Tell","original_url":"http://www.technologytell.com/hometech/97615/soundcast-melody-portable-bluetooth-speaker/","website":"http://www.technologytell.com/","author":"Dennis Burger","preview_text":"\"UV-resistant and water-resistant, with a rechargeable high-capacity lithium-ion battery pack good for up to 20 hours of uninterrupted listening and a full 360 degrees of rocking audio output. The Soundcast Melody achieves that rocking output with an acoustic design that’s specifically tailored to open spaces, and a total of eight drivers.”\n\n","reviews_link":"http://cdn.shopify.com/s/files/1/0392/7805/files/Melody_TechnologyTell_Review_06.12.14.pdf?21052","company_logo":"http://cdn.gosoundcast.com/media-press/logos/tech_tell_200x200.jpg"},
{"company":"Electronic House","original_url":"http://www.electronichouse.com/article/hands_on_soundcast_melody_outdoor_bluetooth_speaker","website":"http://www.electronichouse.com/","author":"Grant Clauser","preview_text":"“Bluetooth speakers are getting pretty common this year, but the Melody’s portability and rugged construction are what sets it apart. You can set it out on your patio, running off the battery, and not worry if a rain shower passes over your cookout or someone kicks some wet sand on it at the beach.”","reviews_link":"http://cdn.shopify.com/s/files/1/0392/7805/files/Melody_Electronic_House_Review_06.12.14.pdf?21052","company_logo":"http://cdn.gosoundcast.com/media-press/logos/electronic_house_200x200.jpg"}]
  };
});

myApp.controller('reviewsCtrl', function($scope, Reviews, $modal, $log){
  $scope.reviews = Reviews.reviews;
  $scope.open = function (review) {

    var modalInstance = $modal.open({
      templateUrl: 'myModalContent.html',
      controller: ModalInstanceCtrl,
      resolve: {
        reviews: function () {
          return review;
        }
      }
    });

  };

});

var ModalInstanceCtrl = function ($scope, $modalInstance, reviews, $sce) {


  $scope.selected = reviews;
  $scope.ok = function () {
    $modalInstance.close($scope.selected.review);
  };

  $scope.trustedSrc = function(src){
    return $sce.trustAsResourceUrl("http://docs.google.com/gview?url=" + src + '&embedded=true&output=embed');
  }

  $scope.pdfSrc = function(src){
    return $sce.trustAsResourceUrl(src);
  }

  $scope.cancel = function () {
    $modalInstance.dismiss('cancel');
  };
};



myApp.filter('truncate', function(){
  return function (text, length, end) {
      if (isNaN(length))
          length = 10;

      if (end === undefined)
          end = "...";

      if (text.length <= length || text.length - end.length <= length) {
          return text;
      }
      else {
          return String(text).substring(0, length-end.length) + end;
      }

  };
});
